<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="google-site-verification" content="OrJ99zXpus_GMOqnEmZI1sJSos31nitrKKtMX8o49KM" />

    <title>×¡×¤×•×¨×˜ ×¤×œ×•×¡ | ×ª×§×¦×™×¨×™ ×›×“×•×¨×’×œ ×•×ª×•×¦××•×ª ×—×™×•×ª ×‘×–××Ÿ ×××ª</title>
    <meta name="description" content="×¦×¤×• ×‘×ª×§×¦×™×¨×™ ×”×•×•×™×“××• ×”×¢×“×›× ×™×™× ×‘×™×•×ª×¨ ××›×œ ×”×œ×™×’×•×ª ×”××•×‘×™×œ×•×ª. ×ª×•×¦××•×ª ×¡×¤×•×¨×˜ ×‘×–××Ÿ ×××ª, ×¡×™×›×•××™ ××©×—×§×™× ×•×¢×“×›×•× ×™× ×©×•×˜×¤×™× ×‘××ª×¨ ×¡×¤×•×¨×˜ ×¤×œ×•×¡.">
    <meta name="keywords" content="×›×“×•×¨×’×œ, ×ª×§×¦×™×¨×™×, ×ª×•×¦××•×ª ×—×™×•×ª, ×œ×™×’×ª ×”××œ×•×¤×•×ª, ×ª×§×¦×™×¨×™ ×•×™×“××•, ×¡×¤×•×¨×˜, ×œ×™×’×” ×× ×’×œ×™×ª, ×œ×™×’×” ×¡×¤×¨×“×™×ª">
    <link rel="canonical" href="https://almog787.github.io/sports-highlights-hub/" />

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://almog787.github.io/sports-highlights-hub/">
    <meta property="og:title" content="×¡×¤×•×¨×˜ ×¤×œ×•×¡ - ×ª×§×¦×™×¨×™× ×•×ª×•×¦××•×ª ×—×™×•×ª">
    <meta property="og:description" content="×›×œ ×ª×•×¦××•×ª ×”×¡×¤×•×¨×˜ ×•×ª×§×¦×™×¨×™ ×”×•×•×™×“××• ×‘××§×•× ××—×“.">
    <meta property="og:image" content="https://almog787.github.io/sports-highlights-hub/data/og-image.jpg">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f4f6f9; font-family: system-ui, -apple-system, sans-serif; }
        .video-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 12px; background: #000; }
        .video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; }
        .card { margin-bottom: 25px; border: none; box-shadow: 0 4px 15px rgba(0,0,0,0.08); border-radius: 15px; overflow: hidden; transition: transform 0.2s; }
        .card:hover { transform: translateY(-5px); }
        .nav-categories { overflow-x: auto; white-space: nowrap; padding: 10px 0; -webkit-overflow-scrolling: touch; }
        .nav-categories::-webkit-scrollbar { display: none; }
        .nav-categories button { margin-left: 8px; border-radius: 20px; padding: 5px 15px; }
        .live-score-item { border-bottom: 1px solid #eee; padding: 12px 0; font-size: 0.95rem; }
        .live-score-item:last-child { border-bottom: none; }
        .pulse { animation: blinker 1.5s linear infinite; color: #ff4d4d; font-weight: bold; }
        @keyframes blinker { 50% { opacity: 0; } }
        .sticky-sidebar { position: -webkit-sticky; position: sticky; top: 20px; }
    </style>
</head>
<body>
    <nav class="navbar navbar-dark bg-dark mb-4 shadow">
        <div class="container">
            <a class="navbar-brand fw-bold" href="?" onclick="resetFilter(event)">ğŸ† ×¡×¤×•×¨×˜ ×¤×œ×•×¡</a>
        </div>
    </nav>

    <div class="container">
        <div class="mb-4 nav-categories" id="categories-container">
            </div>

        <div class="row">
            <div class="col-lg-8">
                <h3 class="mb-4 fw-bold" id="current-category-title">×”×ª×§×¦×™×¨×™× ×”××—×¨×•× ×™×</h3>
                <div id="highlights-container" class="row">
                    <div class="text-center py-5">
                        <div class="spinner-border text-primary" role="status"></div>
                        <p class="mt-2 text-muted">×˜×•×¢×Ÿ × ×ª×•× ×™× ×¢×‘×•×¨×š...</p>
                    </div>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="card p-3 sticky-sidebar">
                    <h4 class="mb-3 fw-bold"><span class="pulse">â—</span> ×ª×•×¦××•×ª ×—×™×•×ª</h4>
                    <div id="live-scores-container">
                        <div class="text-center text-muted small py-3">××—×¤×© ××©×—×§×™× ×¤×¢×™×œ×™×...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let allHighlights = [];

        async function initApp() {
            await fetchCategories();
            await fetchLiveScores();
            await fetchHighlights();
            applyFilterFromUrl();
        }

        async function fetchCategories() {
            try {
                const response = await fetch('data/categories.json');
                const categories = await response.json();
                const container = document.getElementById('categories-container');
                container.innerHTML = `<button class="btn btn-primary btn-sm" onclick="filterBy('all')">×”×›×œ</button>`;
                
                categories.forEach(category => {
                    const btn = document.createElement('button');
                    btn.className = 'btn btn-outline-secondary btn-sm';
                    btn.textContent = category;
                    btn.onclick = () => filterBy(category);
                    container.appendChild(btn);
                });
            } catch (error) { console.error('Categories error:', error); }
        }

        async function fetchHighlights() {
            try {
                const response = await fetch('data/sports_highlights.json');
                allHighlights = await response.json();
            } catch (error) {
                document.getElementById('highlights-container').innerHTML = '<p class="text-danger text-center">×©×’×™××” ×‘×˜×¢×™× ×ª ×”×ª×›× ×™×.</p>';
            }
        }

        async function fetchLiveScores() {
            try {
                const response = await fetch('data/live_scores.json');
                const liveScores = await response.json();
                const container = document.getElementById('live-scores-container');
                
                if (!liveScores || liveScores.length === 0) {
                    container.innerHTML = '<p class="text-muted small text-center">××™×Ÿ ××©×—×§×™× ×¤×¢×™×œ×™× ×›×¨×’×¢.</p>';
                    return;
                }

                container.innerHTML = '';
                liveScores.slice(0, 12).forEach(match => {
                    const home = match.teams?.home?.name || '×§×‘×•×¦×ª ×‘×™×ª';
                    const away = match.teams?.away?.name || '×§×‘×•×¦×ª ×—×•×¥';
                    const homeScore = match.goals?.home ?? 0;
                    const awayScore = match.goals?.away ?? 0;
                    const time = match.fixture?.status?.elapsed || '';

                    container.innerHTML += `
                        <div class="live-score-item d-flex justify-content-between align-items-center">
                            <span class="text-end" style="width: 40%">${home}</span>
                            <span class="badge bg-light text-dark mx-2">${homeScore} - ${awayScore}</span>
                            <span class="text-start" style="width: 40%">${away}</span>
                            <span class="text-danger small fw-bold ms-1" style="width: 10%">${time}'</span>
                        </div>
                    `;
                });
            } catch (error) { console.error('Live scores error:', error); }
        }

        function filterBy(category) {
            const url = new URL(window.location);
            if (category === 'all') {
                url.searchParams.delete('league');
                document.getElementById('current-category-title').textContent = '×”×ª×§×¦×™×¨×™× ×”××—×¨×•× ×™×';
            } else {
                url.searchParams.set('league', category);
                document.getElementById('current-category-title').textContent = category;
            }
            window.history.pushState({}, '', url);
            renderHighlights(category);
        }

        function applyFilterFromUrl() {
            const params = new URLSearchParams(window.location.search);
            const league = params.get('league');
            renderHighlights(league || 'all');
            if(league) document.getElementById('current-category-title').textContent = league;
        }

        function resetFilter(event) {
            event.preventDefault();
            filterBy('all');
        }

        function renderHighlights(category) {
            const container = document.getElementById('highlights-container');
            container.innerHTML = '';
            
            const filteredData = category === 'all' 
                ? allHighlights 
                : allHighlights.filter(item => item.competition === category);

            if (filteredData.length === 0) {
                container.innerHTML = '<div class="col-12 text-center py-5 text-muted">×œ× × ××¦××• ×ª×§×¦×™×¨×™× ×‘×§×˜×’×•×¨×™×” ×–×•.</div>';
                return;
            }

            filteredData.forEach(item => {
                const col = document.createElement('div');
                col.className = 'col-md-12';
                col.innerHTML = `
                    <div class="card p-3">
                        <div class="row align-items-center">
                            <div class="col-md-7">
                                <div class="video-container">${item.embed_code}</div>
                            </div>
                            <div class="col-md-5 mt-3 mt-md-0">
                                <h5 class="fw-bold">${item.title}</h5>
                                <p class="text-primary mb-1">${item.competition}</p>
                                <p class="text-muted small">×¤×•×¨×¡× ×‘: ${new Date(item.date).toLocaleDateString('he-IL')}</p>
                                <a href="${item.url || '#'}" target="_blank" class="btn btn-outline-dark btn-sm">×¦×¤×™×™×” ×‘-ScoreBat</a>
                            </div>
                        </div>
                    </div>
                `;
                container.appendChild(col);
            });
        }

        window.addEventListener('popstate', applyFilterFromUrl);
        initApp();
    </script>
</body>
</html>
